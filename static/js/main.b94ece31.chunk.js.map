{"version":3,"sources":["components/Frame/Frame.module.scss","components/Layout/Layout.module.scss","components/Title/Title.module.scss","components/Loader/Loader.module.scss","components/Title/Title.jsx","components/Layout/Layout.jsx","selectors/app.selectors.js","api/index.js","slices/app.slice.js","constants/errors.js","components/Form/Form.jsx","components/Frame/Frame.jsx","components/Loader/Loader.jsx","App.js","serviceWorker.js","store/index.js","index.js","components/Form/Form.module.scss"],"names":["module","exports","Title","className","title","Layout","children","styles","layout","main","isLoadingSelector","state","isLoading","searchTextSelector","searchText","errorSelector","error","unViewedImagesSelector","createSelector","data","viewedIds","images","filter","item","includes","id","currentImageSelector","firstImage","fetchImages","value","a","axios","get","params","q","limit","api_key","process","REACT_APP_API_KEY","result","map","url","downsized","console","log","getImages","createAsyncThunk","appSlice","createSlice","name","initialState","reducers","setError","action","payload","clearError","setSearchText","addViewedImageId","push","extraReducers","pending","fulfilled","rejected","actions","Form","useState","searchValue","setSearchValue","useSelector","currentImage","dispatch","useDispatch","onSubmit","e","preventDefault","trim","toLowerCase","bar","form","input","type","placeholder","onChange","target","button","Frame","frame","image","src","alt","caption","Loader","circle","App","shallowEqual","Boolean","window","location","hostname","match","store","configureStore","reducer","devTools","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.b94ece31.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"frame\":\"Frame_frame__3xFCM\",\"image\":\"Frame_image__2KvTX\",\"caption\":\"Frame_caption__1SvEe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"Layout_layout__vps_j\",\"main\":\"Layout_main__3OBIG\",\"blurred\":\"Layout_blurred__2C1Dq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Title_title__1jPs1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"circle\":\"Loader_circle__3_imu\",\"lds-ellipsis\":\"Loader_lds-ellipsis__1vFKe\",\"lds-ellipsis2\":\"Loader_lds-ellipsis2__3uUj4\",\"lds-ellipsis3\":\"Loader_lds-ellipsis3__apNXa\"};","import { title } from \"./Title.module.scss\";\n\nexport const Title = () => <h1 className={title}>Find your GIF!</h1>;\n","import { Title } from \"@components/Title\";\n\nimport styles from \"./Layout.module.scss\";\n\nexport const Layout = ({ children }) => (\n  <div className={styles.layout}>\n    <main className={styles.main}>\n      <Title />\n      {children}\n    </main>\n  </div>\n);\n","import { createSelector } from \"reselect\";\n\nexport const imagesSelector = state => state.data;\nexport const isLoadingSelector = state => state.isLoading;\nexport const viewedIdsSelector = state => state.viewedIds;\nexport const searchTextSelector = state => state.searchText;\nexport const errorSelector = state => state.error;\n\nexport const unViewedImagesSelector = createSelector(\n  [imagesSelector, viewedIdsSelector],\n  (images, viewedIds) => {\n    return images.filter(item => !viewedIds.includes(item.id));\n  },\n);\n\nexport const currentImageSelector = createSelector(\n  unViewedImagesSelector,\n  images => {\n    const [firstImage] = images;\n\n    return firstImage ?? null;\n  },\n);\n","import axios from \"axios\";\n\nexport const fetchImages = async value => {\n  try {\n    const {\n      data: { data: result },\n    } = await axios.get(`https://api.giphy.com/v1/gifs/search`, {\n      params: {\n        q: value,\n        limit: 150,\n        api_key: process.env.REACT_APP_API_KEY,\n      },\n    });\n\n    return result.map(item => ({\n      id: item.id,\n      title: item.title,\n      url: item.images.downsized.url,\n    }));\n  } catch (e) {\n    console.log(e);\n  }\n};\n","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\n\nimport { fetchImages } from \"@api/index\";\nimport { DEFAULT_ERROR_MESSAGE, NO_RESULTS_ERROR } from \"@constants/errors\";\n\nconst initialState = {\n  data: [],\n  isLoading: false,\n  viewedIds: [],\n  error: null,\n  searchText: \"\",\n};\n\nexport const getImages = createAsyncThunk(\"app/getImages\", fetchImages);\n\nconst appSlice = createSlice({\n  name: \"app\",\n  initialState,\n  reducers: {\n    setError(state, action) {\n      state.error = action.payload;\n    },\n    clearError(state) {\n      state.error = null;\n    },\n    setSearchText(state, action) {\n      state.searchText = action.payload;\n    },\n    addViewedImageId(state, action) {\n      state.viewedIds.push(action.payload);\n    },\n  },\n  extraReducers: {\n    [getImages.pending]: state => {\n      state.isLoading = true;\n      state.viewedIds = [];\n    },\n    [getImages.fulfilled]: (state, action) => {\n      state.data = action.payload;\n      const [firstImage] = action.payload;\n\n      if (!firstImage) {\n        state.error = NO_RESULTS_ERROR;\n      }\n\n      state.isLoading = false;\n    },\n    [getImages.rejected]: state => {\n      state.isLoading = false;\n      state.error = DEFAULT_ERROR_MESSAGE;\n    },\n  },\n});\n\nexport const {\n  setError,\n  clearError,\n  setSearchText,\n  addViewedImageId,\n} = appSlice.actions;\n\nexport default appSlice.reducer;\n","export const DEFAULT_ERROR_MESSAGE = \"Request failed. Try again later.\";\nexport const NO_RESULTS_ERROR = \"No results, try another phrase\";\nexport const EMPTY_FIELD_ERROR = \"Field is empty\";\n","import { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { EMPTY_FIELD_ERROR } from \"@constants/errors\";\nimport {\n  currentImageSelector,\n  errorSelector,\n  searchTextSelector,\n} from \"@selectors/app.selectors\";\n\nimport {\n  addViewedImageId,\n  clearError,\n  getImages,\n  setError,\n  setSearchText,\n} from \"@slices/app.slice\";\n\nimport styles from \"./Form.module.scss\";\n\nexport const Form = () => {\n  const [searchValue, setSearchValue] = useState(\"\");\n  const searchText = useSelector(searchTextSelector);\n  const error = useSelector(errorSelector);\n  const currentImage = useSelector(currentImageSelector);\n\n  const dispatch = useDispatch();\n\n  const onSubmit = async e => {\n    e.preventDefault();\n\n    if (error) {\n      dispatch(clearError());\n    }\n\n    if (searchValue.trim() === \"\") {\n      return dispatch(setError(EMPTY_FIELD_ERROR));\n    }\n\n    if (searchValue.trim().toLowerCase() !== searchText.trim().toLowerCase()) {\n      dispatch(getImages(searchValue));\n      dispatch(setSearchText(searchValue));\n      return;\n    }\n\n    if (currentImage) {\n      dispatch(addViewedImageId(currentImage.id));\n    }\n  };\n\n  return (\n    <form className={styles.bar} onSubmit={onSubmit}>\n      <div className={styles.form}>\n        <input\n          id=\"search\"\n          className={styles.input}\n          type=\"text\"\n          placeholder=\"Pizza!\"\n          onChange={e => setSearchValue(e.target.value)}\n          value={searchValue}\n        />\n        <button className={styles.button} type=\"submit\">\n          Search\n        </button>\n      </div>\n      {error && <p className={styles.error}>{error}</p>}\n    </form>\n  );\n};\n","import { useSelector } from \"react-redux\";\n\nimport { currentImageSelector } from \"@selectors/app.selectors\";\n\nimport styles from \"./Frame.module.scss\";\n\nexport const Frame = () => {\n  const currentImage = useSelector(currentImageSelector);\n\n  if (!currentImage) {\n    return null;\n  }\n\n  return (\n    <figure className={styles.frame}>\n      <img className={styles.image} src={currentImage.url} alt=\"\" />\n      <figcaption className={styles.caption}>{currentImage.title}</figcaption>\n    </figure>\n  );\n};\n","import styles from \"./Loader.module.scss\";\n\nexport const Loader = () => (\n  <div>\n    <div className={styles.circle}>\n      <div>\n        <div />\n      </div>\n      <div>\n        <div />\n      </div>\n      <div>\n        <div />\n      </div>\n      <div>\n        <div />\n      </div>\n      <div>\n        <div />\n      </div>\n    </div>\n  </div>\n);\n","import { shallowEqual, useSelector } from \"react-redux\";\n\n// Components\nimport { Layout } from \"@components/Layout\";\nimport { Form } from \"@components/Form\";\nimport { Frame } from \"@components/Frame\";\nimport { isLoadingSelector } from \"@selectors/app.selectors\";\nimport { Loader } from \"@components/Loader\";\n\nconst App = () => {\n  const isLoading = useSelector(isLoadingSelector, shallowEqual);\n\n  return (\n    <Layout>\n      {isLoading ? <Loader /> : <Frame />}\n      <Form />\n    </Layout>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import reducer from \"@slices/app.slice\";\nimport { configureStore } from \"@reduxjs/toolkit\";\n\nexport const store = configureStore({\n  reducer,\n  devTools: process.env.NODE_ENV !== \"production\",\n});\n","import ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\n\nimport App from \"./App\";\nimport \"./index.scss\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport { store } from \"@store/index\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\"),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"Form_form__3wvE7\",\"bar\":\"Form_bar__3J-wu\",\"input\":\"Form_input__1FXum\",\"resultContainer\":\"Form_resultContainer__VRHbN\",\"image\":\"Form_image__YCpBm\",\"button\":\"Form_button__2ORia\",\"error\":\"Form_error__3GKee\"};"],"sourceRoot":""}